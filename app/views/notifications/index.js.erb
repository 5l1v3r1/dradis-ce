<% partial = escape_javascript(
  render partial: 'notifications',
  locals: { notifications: @notifications,  unread_count: @unread_count}
) %>
$('[data-id="js-notification-container"]').html("<%= partial %>");

// We attach the click event here as the read-all link is generated by this script
$readAll    = $('[data-id="js-read-all"]')
$readAll.click( function (e){
  e.stopPropagation();
  url = $readAll.data('url');

  $.ajax({
    url: url,
    dataType: 'json',
    method: 'POST',
    success: function(data) {
      $container  = $('[data-id="js-notification-container"]')
      $container.find('li.notification').removeClass('unread');
    }
  });
});
